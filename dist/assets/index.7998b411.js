var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,r)=>{for(var l in r||(r={}))a.call(r,l)&&s(e,l,r[l]);if(t)for(var l of t(r))n.call(r,l)&&s(e,l,r[l]);return e};"undefined"!=typeof require&&require;import{a as l,T as o,r as c,R as i,P as m,I as p,c as d,b as u,D as _,d as E,e as h,K as y,u as v,C as f,f as g,g as w,B as x,M as N,h as b,i as k,N as S,j as C,q as z,k as j,F as M,l as R,m as Y,n as q,_ as I,o as F,p as W,S as D,s as A,t as B,v as $,w as T}from"./vendor.dba7ca3b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();l.defaults.baseURL="http://47.99.134.126:7009",l.defaults.withCredentials=!0,l.defaults.headers["Access-Control-Allow-Credentials"]=!0,l.defaults.headers["X-Requested-With"]="XMLHttpRequest",l.defaults.headers.Authorization=`${localStorage.getItem("token")||null}`,l.defaults.headers.post["Content-Type"]="application/json",l.interceptors.request.use((e=>(console.log("axios.js request config=",e),e)),(e=>(console.log("axios.ts interceptors.request error=",e),Promise.reject(e)))),l.interceptors.response.use((e=>"object"!=typeof e.data?(o.show("服务端异常！"),Promise.reject(e)):200!==e.data.code?(e.data.msg&&o.show(e.data.msg),401===e.data.code&&(window.location.href="/login"),413===e.data.code&&o.show("图片不得超过 50kb"),Promise.reject(e.data)):e.data));const O="http://api.chennick.wang",P=l.get,L=l.post,K={1:{icon:"canyin"},2:{icon:"fushi"},3:{icon:"jiaotong"},4:{icon:"riyong"},5:{icon:"gouwu"},6:{icon:"xuexi"},7:{icon:"yiliao"},8:{icon:"lvxing"},9:{icon:"renqing"},10:{icon:"qita"},11:{icon:"gongzi"},12:{icon:"jiangjin"},13:{icon:"zhuanzhang"},14:{icon:"licai"},15:{icon:"tuikuang"},16:{icon:"qita"}},H=0,U=3,X=4,Z=0,G=2,J=3,Q=e=>e&&e.startsWith("http")?e:e=`${O}${e}`;var V="_popup-type_4v4ui_1",ee="_header_4v4ui_7",te="_cross_4v4ui_20",ae="_content_4v4ui_28",ne="_all_4v4ui_31",se="_title_4v4ui_38",re="_expense-wrap_4v4ui_43",le="_income-wrap_4v4ui_44",oe="_active_4v4ui_58";const ce=c.exports.forwardRef((({onSelect:e},t)=>{const[a,n]=c.exports.useState(!1),[s,r]=c.exports.useState("all"),[l,o]=c.exports.useState([]),[u,_]=c.exports.useState([]);c.exports.useEffect((()=>{(async()=>{const{data:{list:e}}=await P("/api/type/list");o(e.filter((e=>1==e.type))),_(e.filter((e=>2==e.type)))})()}),[]),t&&(t.current={show:()=>{n(!0)},close:()=>{n(!1)}});const E=t=>{r(t.id),n(!1),e(t)};return i.createElement(m,{visible:a,direction:"bottom",onMaskClick:()=>n(!1),destroy:!1,mountContainer:()=>document.body},i.createElement("div",{className:V},i.createElement("div",{className:ee},"请选择类型",i.createElement(p,{type:"wrong",className:te,onClick:()=>n(!1)})),i.createElement("div",{className:ae},i.createElement("div",{onClick:()=>E({id:"all"}),className:d({[ne]:!0,[oe]:"all"==s})},"全部类型"),i.createElement("div",{className:se},"支出"),i.createElement("div",{className:re},l.map(((e,t)=>i.createElement("p",{key:t,onClick:()=>E(e),className:d({[oe]:s==e.id})},e.name)))),i.createElement("div",{className:se},"收入"),i.createElement("div",{className:le},u.map(((e,t)=>i.createElement("p",{key:t,onClick:()=>E(e),className:d({[oe]:s==e.id})},e.name)))))))}));ce.propTypes={onSelect:u.func};const ie=c.exports.forwardRef((({onSelect:e,mode:t="date"},a)=>{const[n,s]=c.exports.useState(!1),[r,l]=c.exports.useState(new Date);return a&&(a.current={show:()=>{s(!0)},close:()=>{s(!1)}}),i.createElement(m,{visible:n,direction:"bottom",onMaskClick:()=>s(!1),destroy:!1,mountContainer:()=>document.body},i.createElement("div",null,i.createElement(_,{visible:n,value:r,mode:t,onOk:a=>{l(a),s(!1),"month"==t?e(E(a).format("YYYY-MM")):"date"==t&&e(E(a).format("YYYY-MM-DD"))},onCancel:()=>s(!1)})))}));ie.propTypes={mode:u.string,onSelect:u.func};var me=p.createFromIconfont("//at.alicdn.com/t/font_2236655_w1mpqp7n1ni.js");var pe={addWrap:"_add-wrap_11omu_1",header:"_header_11omu_7",close:"_close_11omu_10",filter:"_filter_11omu_15",type:"_type_11omu_21",expense:"_expense_11omu_30",active:"_active_11omu_33",income:"_income_11omu_38",time:"_time_11omu_43",arrow:"_arrow_11omu_52",money:"_money_11omu_56",sufix:"_sufix_11omu_61",amount:"_amount_11omu_66",typeWarp:"_type-warp_11omu_70",typeBody:"_type-body_11omu_79",typeItem:"_type-item_11omu_83",iconfontWrap:"_iconfont-wrap_11omu_90",iconfont:"_iconfont_11omu_90",remark:"_remark_11omu_116"};const de=c.exports.forwardRef((({detail:e={},onReload:t},a)=>{const n=c.exports.useRef(),s=e&&e.id,[r,l]=c.exports.useState(!1),[u,_]=c.exports.useState("expense"),[v,f]=c.exports.useState([]),[g,w]=c.exports.useState([]),[x,N]=c.exports.useState({}),[b,k]=c.exports.useState(""),[S,C]=c.exports.useState(""),[z,j]=c.exports.useState(!1),[M,R]=c.exports.useState(new Date);c.exports.useEffect((()=>{e.id&&(_(1==e.pay_type?"expense":"income"),N({id:e.type_id,name:e.type_name}),C(e.remark),k(e.amount),R(E(Number(e.date)).$d))}),[e]),a&&(a.current={show:()=>{l(!0)},close:()=>{l(!1)}}),c.exports.useEffect((async()=>{const{data:{list:e}}=await P("/api/type/list"),t=e.filter((e=>1==e.type)),a=e.filter((e=>2==e.type));f(t),w(a),s||N(t[0])}),[]);const Y=e=>{_(e),N("expense"==e?v[0]:g[0])},q=async()=>{if(!b)return void o.show("请输入具体金额");const e={amount:Number(b).toFixed(2),type_id:x.id,type_name:x.name,date:1e3*E(M).unix(),pay_type:"expense"==u?1:2,remark:S||""};s?(e.id=s,await L("/api/bill/update",e),o.show("修改成功")):(await L("/api/bill/add",e),k(""),_("expense"),N(v[0]),R(new Date),C(""),o.show("添加成功")),l(!1),t&&t()};return i.createElement(m,{visible:r,direction:"bottom",onMaskClick:()=>l(!1),destroy:!1,mountContainer:()=>document.body},i.createElement("div",{className:pe.addWrap},i.createElement("header",{className:pe.header},i.createElement("span",{className:pe.close,onClick:()=>l(!1)},i.createElement(p,{type:"wrong"}))),i.createElement("div",{className:pe.filter},i.createElement("div",{className:pe.type},i.createElement("span",{onClick:()=>Y("expense"),className:d({[pe.expense]:!0,[pe.active]:"expense"==u})},"支出"),i.createElement("span",{onClick:()=>Y("income"),className:d({[pe.income]:!0,[pe.active]:"income"==u})},"收入")),i.createElement("div",{className:pe.time,onClick:()=>{n.current&&n.current.show()}},E(M).format("MM-DD")," ",i.createElement(p,{className:pe.arrow,type:"arrow-bottom"}))),i.createElement("div",{className:pe.money},i.createElement("span",{className:pe.sufix},"¥"),i.createElement("span",{className:d(pe.amount,pe.animation)},b)),i.createElement("div",{className:pe.typeWarp},i.createElement("div",{className:pe.typeBody},("expense"==u?v:g).map((e=>i.createElement("div",{onClick:()=>(e=>{N(e)})(e),key:e.id,className:pe.typeItem},i.createElement("span",{className:d({[pe.iconfontWrap]:!0,[pe.expense]:"expense"==u,[pe.income]:"income"==u,[pe.active]:x.id==e.id})},i.createElement(me,{className:pe.iconfont,type:K[e.id].icon})),i.createElement("span",null,e.name)))))),i.createElement("div",{className:pe.remark},z?i.createElement(h,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:S,placeholder:"请输入备注信息",onChange:e=>C(e),onBlur:()=>j(!1)}):i.createElement("span",{onClick:()=>j(!0)},S||"添加备注")),i.createElement(y,{type:"price",onKeyClick:e=>(e=>{if("close"!=(e=String(e)))if("delete"!=e)"ok"!=e?"."==e&&b.includes(".")||"."!=e&&b.includes(".")&&b&&b.split(".")[1].length>=2||k(b+e):q();else{let e=b.slice(0,b.length-1);k(e)}})(e)}),i.createElement(ie,{ref:n,onSelect:e=>{R(e)}})))}));de.propTypes={detail:u.object,onReload:u.func};var ue={item:"_item_mkxeh_1",headerDate:"_header-date_mkxeh_7",date:"_date_mkxeh_18",money:"_money_mkxeh_22",itemIcon:"_item-icon_mkxeh_37"};const _e=({bill:e})=>{const[t,a]=c.exports.useState(0),[n,s]=c.exports.useState(0),r=v();c.exports.useEffect((()=>{const t=e.bills.filter((e=>2==e.pay_type)).reduce(((e,t)=>e+=Number(t.amount)),0);a(t);const n=e.bills.filter((e=>1==e.pay_type)).reduce(((e,t)=>e+=Number(t.amount)),0);s(n)}),[e.bills]);return i.createElement("div",{className:ue.item},i.createElement("div",{className:ue.headerDate},i.createElement("div",{className:ue.date},e.date),i.createElement("div",{className:ue.money},i.createElement("span",null,i.createElement("img",{src:"//s.yezgea02.com/1615953405599/zhi%402x.png",alt:"支"}),i.createElement("span",null,"¥",n.toFixed(2))),i.createElement("span",null,i.createElement("img",{src:"//s.yezgea02.com/1615953405599/shou%402x.png",alt:"收"}),i.createElement("span",null,"¥",t.toFixed(2))))),e&&e.bills.sort(((e,t)=>t.date-e.date)).map((e=>i.createElement(f,{className:ue.bill,key:e.id,onClick:()=>(e=>{r.push(`/detail?id=${e.id}`)})(e),title:i.createElement(i.Fragment,null,i.createElement(me,{className:ue.itemIcon,type:e.type_id?K[e.type_id].icon:1}),i.createElement("span",null,e.type_name)),description:i.createElement("span",{style:{color:2==e.pay_type?"red":"#39be77"}},`${1==e.pay_type?"-":"+"}${e.amount}`),help:i.createElement("div",null,E(Number(e.date)).format("HH:mm")," ",e.remark?`| ${e.remark}`:"")}))))};_e.propTypes={bill:u.object};var Ee="_empty_1wb2f_1";const he=({desc:e})=>i.createElement("div",{className:Ee},i.createElement("img",{src:"//s.yezgea02.com/1619144597039/empty.png",alt:"暂无数据"}),i.createElement("div",null,e||"暂无数据"));he.propTypes={desc:u.string};var ye={home:"_home_pyrz3_1",header:"_header_pyrz3_7",dataWrap:"_data-wrap_pyrz3_22",income:"_income_pyrz3_33",typeWrap:"_type-wrap_pyrz3_36",left:"_left_pyrz3_48",arrow:"_arrow_pyrz3_51",contentWrap:"_content-wrap_pyrz3_55",add:"_add_pyrz3_65"};var ve={data:"_data_f4sv2_1",total:"_total_f4sv2_5",time:"_time_f4sv2_13",date:"_date_f4sv2_35",title:"_title_f4sv2_39",expense:"_expense_f4sv2_45",income:"_income_f4sv2_51",structure:"_structure_f4sv2_55",head:"_head_f4sv2_60",tab:"_tab_f4sv2_70",active:"_active_f4sv2_80",content:"_content_f4sv2_88",item:"_item_f4sv2_88",left:"_left_f4sv2_93",type:"_type_f4sv2_100",name:"_name_f4sv2_115",right:"_right_f4sv2_124",percent:"_percent_f4sv2_129",momey:"_momey_f4sv2_135",proportion:"_proportion_f4sv2_138"};let fe=null;var ge={user:"_user_2wwvo_1",head:"_head_2wwvo_5",info:"_info_2wwvo_14",content:"_content_2wwvo_33",logout:"_logout_2wwvo_43"};var we="_auth_kpur3_1",xe="_head_kpur3_5",Ne="_tab_kpur3_16",be="_avtive_kpur3_25",ke="_form_kpur3_30",Se="_operation_kpur3_39",Ce="_agree_kpur3_42";var ze="_header-warp_12wcp_1",je="_block_12wcp_4",Me="_header_12wcp_1";const Re=({title:e=""})=>{const t=v();return i.createElement("div",{className:ze},i.createElement("div",{className:je},i.createElement(S,{className:Me,left:i.createElement(p,{type:"arrow-left",theme:"primary",onClick:()=>t.goBack()}),title:e})))};Re.propTypes={title:u.string};var Ye={detail:"_detail_1wagh_1",card:"_card_1wagh_8",type:"_type_1wagh_16",expense:"_expense_1wagh_29",income:"_income_1wagh_32",iconfont:"_iconfont_1wagh_35",amount:"_amount_1wagh_38",info:"_info_1wagh_43",time:"_time_1wagh_48",remark:"_remark_1wagh_61",operation:"_operation_1wagh_75",vanIcon:"_van-icon_1wagh_82"};var qe="_account_u7md4_1",Ie="_form_u7md4_4",Fe="_btn_u7md4_9";var We=j()((e=>{const{getFieldProps:t,getFieldError:a}=e.form;return i.createElement(i.Fragment,null,i.createElement(Re,{title:"重制密码"}),i.createElement("div",{className:qe},i.createElement("div",{className:Ie},i.createElement(f,{title:"原密码"},i.createElement(h,r({clearable:!0,type:"text",placeholder:"请输入原密码"},t("oldpass",{rules:[{required:!0}]})))),i.createElement(f,{title:"新密码"},i.createElement(h,r({clearable:!0,type:"text",placeholder:"请输入新密码"},t("newpass",{rules:[{required:!0}]})))),i.createElement(f,{title:"确认密码"},i.createElement(h,r({clearable:!0,type:"text",placeholder:"请再此输入新密码确认"},t("newpass2",{rules:[{required:!0}]}))))),i.createElement(x,{className:Fe,block:!0,theme:"primary",onClick:()=>{e.form.validateFields((async(e,t)=>{if(!e){if(console.log(t),t.newpass!=t.newpass2)return void o.show("新密码输入不一致");await L("/api/user/modify_pass",{old_pass:t.oldpass,new_pass:t.newpass,new_pass2:t.newpass2}),o.show("修改成功")}}))}},"提交")))}));var De="_about_1urnl_1";var Ae={userinfo:"_userinfo_1wov8_1",item:"_item_1wov8_8",title:"_title_1wov8_12",avatar:"_avatar_1wov8_16",avatarUrl:"_avatar-url_1wov8_20",desc:"_desc_1wov8_26",upload:"_upload_1wov8_32",signature:"_signature_1wov8_35"};const Be={home:{path:"/",component:()=>{const e=c.exports.useRef(),t=c.exports.useRef(),a=c.exports.useRef(),[n,s]=c.exports.useState(0),[r,l]=c.exports.useState(0),[o,m]=c.exports.useState({}),[d,u]=c.exports.useState(E().format("YYYY-MM")),[_,h]=c.exports.useState(1),[y,v]=c.exports.useState([]),[f,w]=c.exports.useState(0),[x,N]=c.exports.useState(H),[b,k]=c.exports.useState(Z);c.exports.useEffect((()=>{S()}),[_,o,d]);const S=async()=>{const{data:e}=await P(`/api/bill/list?date=${d}&type_id=${o.id||"all"}&page=${_}&page_size=5`);v(1==_?e.list:y.concat(e.list)),s(e.totalExpense.toFixed(2)),l(e.totalIncome.toFixed(2)),w(e.totalPage),k(J),N(X)},C=()=>{N(U),1!=_?h(1):S()};return i.createElement("div",{className:ye.home},i.createElement("div",{className:ye.header},i.createElement("div",{className:ye.dataWrap},i.createElement("span",{className:ye.expense},"总支出：",i.createElement("b",null,"¥ ",n)),i.createElement("span",{className:ye.income},"总收入：",i.createElement("b",null,"¥ ",r))),i.createElement("div",{className:ye.typeWrap},i.createElement("div",{className:ye.left,onClick:()=>{e.current&&e.current.show()}},i.createElement("span",{className:ye.title},o.name||"全部类型"," ",i.createElement(p,{className:ye.arrow,type:"arrow-bottom"}))),i.createElement("div",{className:ye.right},i.createElement("span",{className:ye.time,onClick:()=>{t.current&&t.current.show()}},d,i.createElement(p,{className:ye.arrow,type:"arrow-bottom"}))))),i.createElement("div",{className:ye.contentWrap},y.length?i.createElement(g,{animationDuration:200,stayTime:400,refresh:{state:x,handler:C},load:{state:b,distance:200,handler:()=>{_<f&&(k(G),h(_+1))}}},y.map(((e,t)=>i.createElement(_e,{bill:e,key:t})))):i.createElement(he,null)),i.createElement("div",{className:ye.add,onClick:()=>{a.current&&a.current.show()}},i.createElement(me,{type:"tianjia"})),i.createElement(ce,{ref:e,onSelect:e=>{N(U),h(1),m(e)}}),i.createElement(ie,{ref:t,mode:"month",onSelect:e=>{N(U),h(1),u(e)}}),i.createElement(de,{ref:a,onReload:C}))},name:"账单"},statistics:{path:"/data",component:()=>{const e=c.exports.useRef(),[t,a]=c.exports.useState("expense"),[n,s]=c.exports.useState(E().format("YYYY-MM")),[r,l]=c.exports.useState(0),[o,m]=c.exports.useState(0),[u,_]=c.exports.useState([]),[h,y]=c.exports.useState([]),[v,f]=c.exports.useState("expense");c.exports.useEffect((()=>(g(),()=>{fe.dispose()})),[n]);const g=async()=>{const{data:e}=await P(`/api/bill/data?date=${n}`);l(e.total_expense),m(e.total_income);const t=e.total_data.filter((e=>1==e.pay_type)).sort(((e,t)=>t.number-e.number)),a=e.total_data.filter((e=>2==e.pay_type)).sort(((e,t)=>t.number-e.number));_(t),y(a),b("expense"==v?t:a)},x=e=>{a(e)},N=e=>{f(e),b("expense"==e?u:h)},b=e=>{window.echarts&&(fe=echarts.init(document.getElementById("proportion")),fe.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:e.map((e=>e.type_name))},series:[{name:"支出",type:"pie",radius:"55%",data:e.map((e=>({value:e.number,name:e.type_name}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))};return i.createElement("div",{className:ve.data},i.createElement("div",{className:ve.total},i.createElement("div",{className:ve.time,onClick:()=>{e.current&&e.current.show()}},i.createElement("span",null,n),i.createElement(p,{className:ve.date,type:"date"})),i.createElement("div",{className:ve.title},"共支出"),i.createElement("div",{className:ve.expense},"¥",r),i.createElement("div",{className:ve.income},"共收入¥",o)),i.createElement("div",{className:ve.structure},i.createElement("div",{className:ve.head},i.createElement("span",{className:ve.title},"收支构成"),i.createElement("div",{className:ve.tab},i.createElement("span",{onClick:()=>x("expense"),className:d({[ve.expense]:!0,[ve.active]:"expense"==t})},"支出"),i.createElement("span",{onClick:()=>x("income"),className:d({[ve.income]:!0,[ve.active]:"income"==t})},"收入"))),i.createElement("div",{className:ve.content},("expense"==t?u:h).map((e=>i.createElement("div",{key:e.type_id,className:ve.item},i.createElement("div",{className:ve.left},i.createElement("div",{className:ve.type},i.createElement("span",{className:d({[ve.expense]:"expense"==t,[ve.income]:"income"==t})},i.createElement(me,{type:e.type_id?K[e.type_id].icon:1})),i.createElement("span",{className:ve.name},e.type_name)),i.createElement("div",{className:ve.progress},"¥",Number(e.number).toFixed(2)||0)),i.createElement("div",{className:ve.right},i.createElement("div",{className:ve.percent},i.createElement(w,{shape:"line",percent:Number(e.number/Number("expense"==t?r:o)*100).toFixed(2),theme:"primary"}))))))),i.createElement("div",{className:ve.proportion},i.createElement("div",{className:ve.head},i.createElement("span",{className:ve.title},"收支构成"),i.createElement("div",{className:ve.tab},i.createElement("span",{onClick:()=>N("expense"),className:d({[ve.expense]:!0,[ve.active]:"expense"==v})},"支出"),i.createElement("span",{onClick:()=>N("income"),className:d({[ve.income]:!0,[ve.active]:"income"==v})},"收入"))),i.createElement("div",{id:"proportion"}))),i.createElement(ie,{ref:e,mode:"month",onSelect:e=>{s(e)}}))},name:"统计"},user:{path:"/user",component:()=>{const e=v(),[t,a]=c.exports.useState({}),[n,s]=c.exports.useState(""),[r,l]=c.exports.useState(!1),[m,p]=c.exports.useState("");c.exports.useEffect((()=>{d()}),[]);const d=async()=>{const{data:e}=await P("/api/user/get_userinfo");a(e),p(Q(e.avatar)),s(e.signature)};return i.createElement("div",{className:ge.user},i.createElement("div",{className:ge.head},i.createElement("div",{className:ge.info},i.createElement("span",null,"昵称：",t.username),i.createElement("span",null,i.createElement("img",{style:{width:30,height:30,verticalAlign:"-10px"},src:"//s.yezgea02.com/1615973630132/geqian.png",alt:""}),i.createElement("b",null,t.signature||"暂无内容"))),i.createElement("img",{className:ge.avatar,style:{width:60,height:60,borderRadius:8},src:m,alt:""})),i.createElement("div",{className:ge.content},i.createElement(f,{hasArrow:!0,title:"用户信息修改",onClick:()=>e.push("/userinfo"),icon:i.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/gxqm.png",alt:""})}),i.createElement(f,{hasArrow:!0,title:"重制密码",onClick:()=>e.push("/account"),icon:i.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/zhaq.png",alt:""})}),i.createElement(f,{hasArrow:!0,title:"关于我们",onClick:()=>e.push("/about"),icon:i.createElement("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615975178434/lianxi.png",alt:""})})),i.createElement(x,{className:ge.logout,block:!0,theme:"danger",onClick:async()=>{localStorage.removeItem("token"),e.push("/login")}},"退出登录"),i.createElement(N,{visible:r,title:"标题",closable:!0,onCancel:()=>l(!1),footer:i.createElement(x,{block:!0,theme:"primary",onClick:async()=>{const{data:e}=await L("/api/user/edit_signature",{signature:n});a(e),l(!1),o.show("修改成功")}},"确认")},i.createElement(h,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:n,placeholder:"请输入备注信息",onChange:e=>s(e)})))},name:"我的"},login:{path:"/login",component:()=>{const e=c.exports.useRef(),[t,a]=c.exports.useState("login"),[n,s]=c.exports.useState(""),[r,l]=c.exports.useState(""),[m,p]=c.exports.useState(""),[u,_]=c.exports.useState(""),E=c.exports.useCallback((e=>{s(e)}),[]);return c.exports.useEffect((()=>{document.title="login"===t?"登录":"注册"}),[t]),i.createElement("div",{className:we},i.createElement("div",{className:xe}),i.createElement("div",{className:Ne},i.createElement("span",{className:d({[be]:"login"===t}),onClick:()=>a("login")},"登录"),i.createElement("span",{className:d({[be]:"register"===t}),onClick:()=>a("register")},"注册")),i.createElement("div",{className:ke},i.createElement(f,{icon:i.createElement(me,{type:"zhanghao"})},i.createElement(h,{clearable:!0,type:"text",placeholder:"请输入账号",onChange:e=>l(e)})),i.createElement(f,{icon:i.createElement(me,{type:"mima"})},i.createElement(h,{clearable:!0,type:"password",placeholder:"请输入密码",onChange:e=>p(e)})),"register"===t?i.createElement(f,{icon:i.createElement(me,{type:"mima"})},i.createElement(h,{clearable:!0,type:"text",placeholder:"请输入验证码",onChange:e=>_(e)}),i.createElement(b,{ref:e,charNum:4,onChange:E})):null),i.createElement("div",{className:Se},"register"===t?i.createElement("div",{className:Ce},i.createElement(k,null),i.createElement("label",{className:"text-light"},"阅读并同意",i.createElement("a",null,"《掘掘手札条款》"))):null,i.createElement(x,{onClick:async()=>{if(r)if(m)try{if("login"===t){const{data:e}=await L("/api/user/login",{username:r,password:m});localStorage.setItem("token",e.token),window.location.href="/"}else{if(!u)return void o.show("请输入验证码");if(u!==n)return void o.show("验证码错误");const{data:e}=await L("/api/user/register",{username:r,password:m});o.show("注册成功"),a("login")}}catch(e){o.show(e.msg)}else o.show("请输入密码");else o.show("请输入账号")},block:!0,theme:"primary"},"login"===t?"登录":"注册")))}},detail:{path:"/detail",component:()=>{const e=c.exports.useRef(),t=C(),a=v(),{id:n}=z.parse(t.search),[s,r]=c.exports.useState({});c.exports.useEffect((()=>{l()}),[]);const l=async()=>{const{data:e}=await P(`/api/bill/detail?id=${n}`);r(e)};return i.createElement("div",{className:Ye.detail},i.createElement(Re,{title:"账单详情"}),i.createElement("div",{className:Ye.card},i.createElement("div",{className:Ye.type},i.createElement("span",{className:d({[Ye.expense]:1===s.pay_type,[Ye.income]:2===s.pay_type})},i.createElement(me,{className:Ye.iconfont,type:s.type_id?K[s.type_id].icon:1})),i.createElement("span",null,s.type_name||"")),1===s.pay_type?i.createElement("div",{className:d(Ye.amount,Ye.expense)},"-",s.amount):i.createElement("div",{className:d(Ye.amount,Ye.incom)},"+",s.amount),i.createElement("div",{className:Ye.info},i.createElement("div",{className:Ye.time},i.createElement("span",null,"记录时间"),i.createElement("span",null,E(Number(s.date)).format("YYYY-MM-DD HH:mm"))),i.createElement("div",{className:Ye.remark},i.createElement("span",null,"备注"),i.createElement("span",null,s.remark||"-"))),i.createElement("div",{className:Ye.operation},i.createElement("span",{onClick:()=>{N.confirm({title:"删除",content:"确认删除账单？",onOk:async()=>{await L("/api/bill/delete",{id:n}),o.show("删除成功"),a.goBack()}})}},i.createElement(me,{type:"shanchu"}),"删除"),i.createElement("span",{onClick:()=>{e.current&&e.current.show()}},i.createElement(me,{type:"tianjia"}),"编辑"))),i.createElement(de,{ref:e,detail:s,onReload:l}))}},account:{path:"/account",component:We},about:{path:"/about",component:()=>i.createElement(i.Fragment,null,i.createElement(Re,{title:"关于我们"}),i.createElement("div",{className:De},i.createElement("h2",null,"关于项目"),i.createElement("article",null,"这个项目的初衷，是想让从事前端开发的同学，进入全栈开发的领域。当然，不能说学完本教程你就能胜任任何全栈开发。但至少，你已经可以从设计数据库表开始，把自己的一个想法转化成实际可见的项目。"),i.createElement("h2",null,"关于作者"),i.createElement("article",null,"从 2015 年实习开始至今，有 6 年前端开发经验。虽然没有在大厂呆过，但是正因如此，我深知奋战在中小厂的前端开发在从业 1 到 3 年后，会遇到什么瓶颈，小册中也详细的描述了怎样从初级到中级的进阶之路。"),i.createElement("h2",null,"关于小册"),i.createElement("article",null,"这是一本全栈小册，服务端采用 Node 上层架构 Egg.js，前端采用 React 框架 + Zarm 移动端组件库。本小册致力于让同学们学会服务端的开发流程，从设计数据库到接口的编写，前端的接口数据对接和页面制作，再到线上环境的部署。由于本人用的是 Mac，为了照顾到 Windows 系统的同学，全程关键步骤都会有 Windows 部分的讲解。")))},userinfo:{path:"/userinfo",component:()=>{const e=v(),[t,a]=c.exports.useState({}),[n,s]=c.exports.useState(""),[r,m]=c.exports.useState(""),p=localStorage.getItem("token");c.exports.useEffect((()=>{d()}),[]);const d=async()=>{const{data:e}=await P("/api/user/get_userinfo");a(e),s(Q(e.avatar)),m(e.signature)};return i.createElement(i.Fragment,null,i.createElement(Re,{title:"用户信息"}),i.createElement("div",{className:Ae.userinfo},i.createElement("h1",null,"个人资料"),i.createElement("div",{className:Ae.item},i.createElement("div",{className:Ae.title},"头像"),i.createElement("div",{className:Ae.avatar},i.createElement("img",{className:Ae.avatarUrl,src:n,alt:""}),i.createElement("div",{className:Ae.desc},i.createElement("span",null,"支持 jpg、png、jpeg 格式大小 200KB 以内的图片"),i.createElement(M,{className:Ae.filePicker,onChange:e=>{if(console.log("file.file",e.file),e&&e.file.size>204800)return void o.show("上传头像不得超过 200 KB！！");let t=new FormData;t.append("file",e.file),l({method:"post",url:`${O}/api/upload`,data:t,headers:{"Content-Type":"multipart/form-data",Authorization:p}}).then((e=>{s(Q(e.data))}))},accept:"image/*"},i.createElement(x,{className:Ae.upload,theme:"primary",size:"xs"},"点击上传"))))),i.createElement("div",{className:Ae.item},i.createElement("div",{className:Ae.title},"个性签名"),i.createElement("div",{className:Ae.signature},i.createElement(h,{clearable:!0,type:"text",value:r,placeholder:"请输入个性签名",onChange:e=>m(e)}))),i.createElement(x,{onClick:async()=>{await L("/api/user/edit_userinfo",{signature:r,avatar:n}),o.show("修改成功"),e.goBack()},style:{marginTop:50},block:!0,theme:"primary"},"保存")))}}};var $e="_tab_1udd2_1";const Te=({showNav:e})=>{const[t,a]=c.exports.useState(C().pathname),n=v();console.log("NavBar history=",n);return i.createElement(R,{visible:e,className:$e,activeKey:t,onChange:e=>{console.log("NavBar chnageTab path=",e),a(e),n.push(e)}},i.createElement(R.Item,{itemKey:Be.home.path,title:Be.home.name,icon:i.createElement(me,{type:"zhangdan"})}),i.createElement(R.Item,{itemKey:Be.statistics.path,title:Be.statistics.name,icon:i.createElement(me,{type:"tongji"})}),i.createElement(R.Item,{itemKey:Be.user.path,title:Be.user.name,icon:i.createElement(me,{type:"wode"})}))};Te.propTypes={showNav:u.bool};const Oe=()=>{const{pathname:e}=C(),t=[Be.home.path,Be.statistics.path,Be.user.path],[a,n]=c.exports.useState(!1),[s,r]=Y([""]);return console.log("useCookies==",s),console.log("Cookies.get==",q.get()),console.log("document.cookie=",document.cookie),console.log("cookie.loadAll=",I.loadAll()),c.exports.useEffect((()=>(console.log("app.jsx componentDidMount"),()=>{console.log("app.jsx componentWillUnmount")})),[]),c.exports.useEffect((()=>{n(t.includes(e))}),[e]),i.createElement(F,{primaryColor:"#007fff",locale:W},i.createElement(i.Fragment,null,i.createElement(D,null,Object.values(Be).map((e=>i.createElement(A,{exact:!0,key:e.path,path:e.path},i.createElement(e.component,null))))),i.createElement(Te,{showNav:a})))};B.render(i.createElement(i.StrictMode,null,i.createElement($,null,i.createElement(T,null,i.createElement(Oe,null)))),document.getElementById("root"));
